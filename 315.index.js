(()=>{"use strict";var e;Array.prototype.remove=function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)},Array.prototype.count=function(e){var t=0;return this.forEach((function(r){return e(r)&&t++})),t},Map.prototype.getOrUpdate=function(e,t){var r=this.get(e);return void 0===r&&(r=t(),this.set(e,r)),r},function(e){e[e.aiPriorityTrain=0]="aiPriorityTrain",e[e.aiPriorityGetIn=1]="aiPriorityGetIn",e[e.aiPriorityCrystal=2]="aiPriorityCrystal",e[e.aiPriorityOre=3]="aiPriorityOre",e[e.aiPriorityRepair=4]="aiPriorityRepair",e[e.aiPriorityClearing=5]="aiPriorityClearing",e[e.aiPriorityDestruction=6]="aiPriorityDestruction",e[e.aiPriorityConstruction=7]="aiPriorityConstruction",e[e.aiPriorityReinforce=8]="aiPriorityReinforce",e[e.aiPriorityRecharge=9]="aiPriorityRecharge"}(e||(e={}));var t,r,i=function(){function e(){}return e.setFromCfg=function(e,t){return Object.keys(t).forEach((function(r){var i=(r.startsWith("!")?r.substring(1):r).toLowerCase().replace(/_/g,"").replace(/-/g,"");Object.keys(e).some((function(a){return e.assignValue(a,i,t[r])}))||console.warn("cfg key does not exist: "+r)})),e},e.prototype.assignValue=function(e,t,r){if(e.toLowerCase()===t){var i=this[e],a=Array.isArray(i),n=this.parseValue(t,r),s=Array.isArray(n);return i&&a!==s&&a&&(n=[n]),this[e]=n,!0}},e.prototype.parseValue=function(e,t){return t},e}(),a=function(e){this.r=e[0],this.g=e[1],this.b=e[2]},n=function(e){this.filename=e[0],this.x=e[1],this.y=e[2]},s=(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}),o=function(e){var t=this;this.levelsByName=[],Object.keys(e).forEach((function(r){(r.startsWith("Tutorial")||r.startsWith("Level"))&&(t.levelsByName[r]=new l(e[r]))}))},l=function(e){function t(t){var r=e.call(this)||this;return r.fullName="",r.endGameAvi1="",r.endGameAvi2="",r.allowRename=!1,r.recallOLObjects=!1,r.generateSpiders=!1,r.video="",r.disableEndTeleport=!1,r.disableStartTeleport=!1,r.emergeTimeOut="",r.boulderAnimation="",r.noMultiSelect="",r.noAutoEat="",r.disableToolTipSound="",r.blockSize="",r.digDepth="",r.roughLevel="",r.roofHeight="",r.useRoof="",r.selBoxHeight="",r.fpRotLightRGB="",r.fogColourRGB="",r.highFogColourRGB="",r.fogRate=0,r.fallinMultiplier=0,r.numberOfLandSlidesTillCaveIn=0,r.noFallins=!1,r.oxygenRate=0,r.surfaceMap="",r.predugMap="",r.terrainMap="",r.emergeMap="",r.erodeMap="",r.fallinMap="",r.blockPointersMap="",r.cryOreMap="",r.pathMap="",r.noGather=!1,r.textureSet="",r.rockFallStyle="",r.emergeCreature="",r.safeCaverns="",r.seeThroughWalls="",r.oListFile="",r.ptlFile="",r.nerpFile="",r.nerpMessageFile="",r.objectiveText="",r.objectiveImage640x480=null,r.erodeTriggerTime=0,r.erodeErodeTime=0,r.erodeLockTime=0,r.nextLevel="",r.levelLinks="",r.frontEndX=0,r.frontEndY=0,r.frontEndOpen=!1,r.priorities=[],r.reward=null,r.menuBMP=[],i.setFromCfg(r,t),r}return s(t,e),t.prototype.parseValue=function(t,r){return t==="fullName".toLowerCase()?r.replace(/_/g," "):t.endsWith("rgb")?new a(r):"priorities"===t?Object.keys(r).filter((function(e){return e.toLowerCase()!=="AI_Priority_GetTool".toLowerCase()})).map((function(e){return new u(e,r[e])})):"reward"===t?new h(r):"objectiveimage640x480"===t?new n(r):e.prototype.parseValue.call(this,t,r)},t}(i),u=function(t,r){this.key=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach((function(t){e=(e=Object.keys(e).filter((function(e){return e.toLowerCase()===t.toLowerCase()})).map((function(t){return e[t]})))?e[0]:e})),e}(e,t.replace(/_/g,"")),this.enabled=r},h=function(e){function t(t){var r=e.call(this)||this;return r.enable=!0,r.modifier=null,r.importance=null,r.quota=null,i.setFromCfg(r,t),r}return s(t,e),t.prototype.parseValue=function(t,r){return"importance"===t?new c(r):"quota"===t?new d(r):e.prototype.parseValue.call(this,t,r)},t}(i),c=function(e){function t(t){var r=e.call(this)||this;return r.crystals=0,r.timer=0,r.caverns=0,r.constructions=0,r.oxygen=0,r.figures=0,i.setFromCfg(r,t),r}return s(t,e),t}(i),d=function(e){function t(t){var r=e.call(this)||this;return r.crystals=null,r.timer=null,r.caverns=null,r.constructions=null,i.setFromCfg(r,t),r}return s(t,e),t}(i),f=function(e){this.actionName=e[0],this.x=e[1],this.y=e[2],this.width=e[3],this.height=e[4],this.description=e[5],this.two=e[6],this.labelOff=e[7],this.labelOn=e[8],this.description=this.description.replace(/_/g," ")},p=function(e){5===e.length||6===e.length?(this.actionName=e[0],this.x=e[1],this.y=e[2],this.label=e[3],this.target=e[4],this.flag=e[5],this.label=Array.isArray(this.label)?this.label.join(","):this.label,this.label=this.label.replace(/_/g," ")):8===e.length?(this.actionName=e[0],this.x=e[1],this.y=e[2],this.imgNormal=e[3],this.imgHover=e[4],this.imgPressed=e[5],this.tooltip=e[6],this.target=e[7]):(console.warn("Unexpected cfg object length: "+e.length),console.log(e))},g=function(e){this.actionName=e[0],this.x=e[1],this.y=e[2],this.width=e[3],this.height=e[4],this.description=e[5],this.min=e[6],this.max=e[7],this.imgOff=e[8],this.imgOn=e[9],this.imgLeft=e[10],this.imgRight=e[11],this.btnRightNormal=e[12],this.btnLeftNormal=e[13],this.btnRightHover=e[14],this.btnLeftHover=e[15]},m=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),y=function(e){function t(t){var r=e.call(this)||this;return r.fullName="",r.title="",r.position=[0,0],r.menuFont="",r.loFont="",r.hiFont="",r.itemCount=0,r.menuImage="",r.autoCenter=!1,r.displayTitle=!1,r.overlays=[],r.playRandom=!1,r.itemsLabel=[],r.itemsSlider=[],r.itemsCycle=[],r.anchored=!1,r.canScroll=!1,i.setFromCfg(r,t),r}return m(t,e),t.prototype.assignValue=function(t,r,i){if(r.match(/item\d+/i)){var a=i[0].toLowerCase();if("next"===a||"trigger"===a)this.itemsLabel.push(new p(i));else if("slider"===a)this.itemsSlider.push(new g(i));else{if("cycle"!==a)return console.warn("Unexpected item action name: "+i[0]),!1;this.itemsCycle.push(new f(i))}return!0}return r.match(/overlay\d+/i)?(this.overlays.push(i),!0):e.prototype.assignValue.call(this,t,r,i)},t.prototype.parseValue=function(t,r){return t==="fullName".toLowerCase()||"title"===t?r.replace(/_/g," "):e.prototype.parseValue.call(this,t,r)},t}(i),C=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),v=function(e){function t(t){var r=e.call(this)||this;return r.menuCount=0,r.menus=[],i.setFromCfg(r,t),r}return C(t,e),t.prototype.assignValue=function(t,r,i){return r.match(/menu\d+/i)?(this.menus.push(new y(i)),!0):e.prototype.assignValue.call(this,t,r,i)},t}(i),S=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),A=function(e){function t(t){var r=e.call(this)||this;return r.display=!0,r.wallpaper="",r.images=[],r.texts=[],r.boxImages=[],r.fonts=null,r.flics=null,r.scrollSpeed=0,r.centreText=!1,r.vertSpacing=0,r.backFont="",r.font="",r.titleFont="",r.timer=0,r.saveButton="",r.advanceButton="",r.completeText="",r.failedText="",r.quitText="",r.textPos=[0,0],i.setFromCfg(r,t),r}return S(t,e),t.prototype.assignValue=function(t,r,i){var a=this;return"images"===r?(Object.values(i).forEach((function(e){return a.images.push(new w(e))})),!0):"text"===r?(Object.values(i).forEach((function(e){return a.texts.push(new b(e))})),!0):"boximages"===r?(Object.values(i).forEach((function(e){return a.boxImages.push(new w(e))})),!0):"fonts"===r?(this.fonts=new L(i),!0):e.prototype.assignValue.call(this,t,r,i)},t}(i),w=function(e){this.filePath="",this.x=0,this.y=0,this.filePath=e[0],this.x=e[1],this.y=e[2]},b=function(e){this.text="",this.x=0,this.y=0,this.text=e[0],this.x=e[1],this.y=e[2]},L=function(e){function t(t){var r=e.call(this)||this;return r.crystals="",r.ore="",r.diggable="",r.constructions="",r.caverns="",r.figures="",r.rockMonsters="",r.oxygen="",r.timer="",r.score="",i.setFromCfg(r,t),r}return S(t,e),t}(i);!function(e){e[e.BITMAP_INFO_HEADER=40]="BITMAP_INFO_HEADER",e[e.BITMAP_V2_INFO_HEADER=52]="BITMAP_V2_INFO_HEADER",e[e.BITMAP_V3_INFO_HEADER=56]="BITMAP_V3_INFO_HEADER",e[e.BITMAP_V4_HEADER=108]="BITMAP_V4_HEADER",e[e.BITMAP_V5_HEADER=124]="BITMAP_V5_HEADER"}(r||(r={}));for(var R=function(){function e(e,t){var r=(void 0===t?{toRGBA:!1}:t).toRGBA;if(this.buffer=e,this.bufferView=new DataView(e.buffer,e.byteOffset,e.byteLength),this.toRGBA=!!r,this.bottomUp=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos=2,"BM"!==this.flag)throw new Error("Invalid BMP File");this.locRed=this.toRGBA?0:3,this.locGreen=this.toRGBA?1:2,this.locBlue=this.toRGBA?2:1,this.locAlpha=this.toRGBA?3:0,this.parseHeader(),this.parseRGBA()}return e.prototype.parseHeader=function(){if(this.fileSize=this.readUInt32LE(),this.reserved1=this.bufferView.getUint16(this.pos,!0),this.pos+=2,this.reserved2=this.bufferView.getUint16(this.pos,!0),this.pos+=2,this.offset=this.readUInt32LE(),this.headerSize=this.readUInt32LE(),!(this.headerSize in r))throw new Error("Unsupported BMP header size "+this.headerSize);if(this.width=this.readUInt32LE(),this.height=this.readUInt32LE(),this.planes=this.bufferView.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.bufferView.getUint16(this.pos,!0),this.pos+=2,this.compression=this.readUInt32LE(),this.rawSize=this.readUInt32LE(),this.hr=this.readUInt32LE(),this.vr=this.readUInt32LE(),this.colors=this.readUInt32LE(),this.importantColors=this.readUInt32LE(),32===this.bitPP?(this.maskAlpha=0,this.maskRed=16711680,this.maskGreen=65280,this.maskBlue=255):16===this.bitPP&&(this.maskAlpha=0,this.maskRed=31744,this.maskGreen=992,this.maskBlue=31),(this.headerSize>r.BITMAP_INFO_HEADER||3===this.compression||6===this.compression)&&(this.maskRed=this.readUInt32LE(),this.maskGreen=this.readUInt32LE(),this.maskBlue=this.readUInt32LE()),(this.headerSize>r.BITMAP_V2_INFO_HEADER||6===this.compression)&&(this.maskAlpha=this.readUInt32LE()),this.headerSize>r.BITMAP_V3_INFO_HEADER&&(this.pos+=r.BITMAP_V4_HEADER-r.BITMAP_V3_INFO_HEADER),this.headerSize>r.BITMAP_V4_HEADER&&(this.pos+=r.BITMAP_V5_HEADER-r.BITMAP_V4_HEADER),this.bitPP<=8||this.colors>0){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var i=this.buffer[this.pos++],a=this.buffer[this.pos++],n=this.buffer[this.pos++],s=this.buffer[this.pos++];this.palette[t]={red:n,green:a,blue:i,quad:s}}}this.height<0&&(this.height*=-1,this.bottomUp=!1);var o,l,u,h,c,d,f,p,g,m,y,C,v=(o=this.maskRed,l=this.maskGreen,u=this.maskBlue,h=this.maskAlpha,g=o/(c=1+~o&o)+1,m=l/(d=1+~l&l)+1,y=u/(f=1+~u&u)+1,C=h/(p=1+~h&h)+1,{shiftRed:function(e){return(e&o)/c*256/g},shiftGreen:function(e){return(e&l)/d*256/m},shiftBlue:function(e){return(e&u)/f*256/y},shiftAlpha:0!==h?function(e){return(e&h)/p*256/C}:function(){return 255}});this.shiftRed=v.shiftRed,this.shiftGreen=v.shiftGreen,this.shiftBlue=v.shiftBlue,this.shiftAlpha=v.shiftAlpha},e.prototype.parseRGBA=function(){switch(this.data=new Uint8Array(this.width*this.height*4),this.bitPP){case 1:this.bit1();break;case 4:this.bit4();break;case 8:this.bit8();break;case 16:this.bit16();break;case 24:this.bit24();break;default:this.bit32()}},e.prototype.bit1=function(){var e,t=this,r=Math.ceil(this.width/8),i=r%4,a=0!==i?4-i:0;this.scanImage(a,r,(function(r,i){i!==e&&(e=i);for(var a=t.buffer[t.pos++],n=i*t.width*4+8*r*4,s=0;s<8&&8*r+s<t.width;s++){var o=t.palette[a>>7-s&1];t.data[n+4*s+t.locAlpha]=255,t.data[n+4*s+t.locBlue]=o.blue,t.data[n+4*s+t.locGreen]=o.green,t.data[n+4*s+t.locRed]=o.red}}))},e.prototype.bit4=function(){var e=this;if(2===this.compression){this.data.fill(0);for(var t=!1,r=this.bottomUp?this.height-1:0,i=0;i<this.data.length;){var a=this.buffer[this.pos++],n=this.buffer[this.pos++];if(0===a){if(0===n){i=(r+=this.bottomUp?-1:1)*this.width*4,t=!1;continue}if(1===n)break;if(2===n){var s=this.buffer[this.pos++],o=this.buffer[this.pos++];r+=this.bottomUp?-o:o,i+=o*this.width*4+4*s}else{for(var l=this.buffer[this.pos++],u=0;u<n;u++)i=this.setPixelData(i,t?15&l:(240&l)>>4),1&u&&u+1<n&&(l=this.buffer[this.pos++]),t=!t;1==(n+1>>1&1)&&this.pos++}}else for(u=0;u<a;u++)i=this.setPixelData(i,t?15&n:(240&n)>>4),t=!t}}else{var h=Math.ceil(this.width/2),c=h%4,d=0!==c?4-c:0;this.scanImage(d,h,(function(t,r){var i=e.buffer[e.pos++],a=r*e.width*4+2*t*4,n=i>>4,s=e.palette[n];if(e.data[a+e.locAlpha]=255,e.data[a+e.locBlue]=s.blue,e.data[a+e.locGreen]=s.green,e.data[a+e.locRed]=s.red,2*t+1>=e.width)return!1;var o=15&i;s=e.palette[o],e.data[a+4+e.locAlpha]=255,e.data[a+4+e.locBlue]=s.blue,e.data[a+4+e.locGreen]=s.green,e.data[a+4+e.locRed]=s.red}))}},e.prototype.bit8=function(){var e=this;if(1===this.compression){this.data.fill(0);for(var t=this.bottomUp?this.height-1:0,r=0;r<this.data.length;){var i=this.buffer[this.pos++],a=this.buffer[this.pos++];if(0===i){if(0===a){r=(t+=this.bottomUp?-1:1)*this.width*4;continue}if(1===a)break;if(2===a){var n=this.buffer[this.pos++],s=this.buffer[this.pos++];t+=this.bottomUp?-s:s,r+=s*this.width*4+4*n}else{for(var o=0;o<a;o++){var l=this.buffer[this.pos++];r=this.setPixelData(r,l)}!0&a&&this.pos++}}else for(o=0;o<i;o++)r=this.setPixelData(r,a)}}else{var u=this.width%4,h=0!==u?4-u:0;this.scanImage(h,this.width,(function(t,r){var i=e.buffer[e.pos++],a=r*e.width*4+4*t;if(i<e.palette.length){var n=e.palette[i];e.data[a+e.locAlpha]=255,e.data[a+e.locBlue]=n.blue,e.data[a+e.locGreen]=n.green,e.data[a+e.locRed]=n.red}}))}},e.prototype.bit16=function(){var e=this,t=this.width%2*2;this.scanImage(t,this.width,(function(t,r){var i=r*e.width*4+4*t,a=e.bufferView.getUint16(e.pos,!0);e.pos+=2,e.data[i+e.locRed]=e.shiftRed(a),e.data[i+e.locGreen]=e.shiftGreen(a),e.data[i+e.locBlue]=e.shiftBlue(a),e.data[i+e.locAlpha]=e.shiftAlpha(a)}))},e.prototype.bit24=function(){var e=this,t=this.width%4;this.scanImage(t,this.width,(function(t,r){var i=r*e.width*4+4*t,a=e.buffer[e.pos++],n=e.buffer[e.pos++],s=e.buffer[e.pos++];e.data[i+e.locAlpha]=255,e.data[i+e.locBlue]=a,e.data[i+e.locGreen]=n,e.data[i+e.locRed]=s}))},e.prototype.bit32=function(){var e=this;this.scanImage(0,this.width,(function(t,r){var i=r*e.width*4+4*t,a=e.readUInt32LE();e.data[i+e.locAlpha]=e.shiftAlpha(a),e.data[i+e.locBlue]=e.shiftBlue(a),e.data[i+e.locGreen]=e.shiftGreen(a),e.data[i+e.locRed]=e.shiftRed(a)}))},e.prototype.scanImage=function(e,t,r){void 0===e&&(e=0),void 0===t&&(t=this.width);for(var i=this.height-1;i>=0;i--){for(var a=this.bottomUp?i:this.height-1-i,n=0;n<t;n++)r.call(this,n,a);this.pos+=e}},e.prototype.readUInt32LE=function(){var e=this.bufferView.getUint32(this.pos,!0);return this.pos+=4,e},e.prototype.setPixelData=function(e,t){var r=this.palette[t],i=r.blue,a=r.green,n=r.red;return this.data[e+this.locAlpha]=255,this.data[e+this.locBlue]=i,this.data[e+this.locGreen]=a,this.data[e+this.locRed]=n,e+4},e}(),D=function(){function e(){}return e.parse=function(e,t){var r;void 0===t&&(t=null);var i=new R(e,{toRGBA:!0}),a=new Uint8ClampedArray(i.data);if(t||0===t)for(var n=null===(r=i.palette)||void 0===r?void 0:r[t],s=0;s<i.data.length;s+=4)a[s+3]=(null==n?void 0:n.red)===a[s]&&(null==n?void 0:n.green)===a[s+1]&&(null==n?void 0:n.blue)===a[s+2]?0:255;return new ImageData(a,i.width,i.height)},e}(),P=[],T=0;T<256;T++)P[T]=T;P[130]=228,P[142]=196,P[162]=246,P[167]=220,P[171]=252,P[195]=223;var F,E=function(){function e(){}return e.parse=function(t){for(var r={},i=[],a=r,n=!1,s=0,o="",l="",u=0;u<t.length;u++){var h=t[u];123===h&&"FullName"===o&&(h=142);var c=String.fromCharCode(P[h]);if(";"===c||"/"===c?n=!0:10!==h&&13!==h||(n=!1),!n)if(h>32)0===s?"}"===c?a=i.pop():(s++,o=c):1===s?o+=c:2===s?"{"===c?(i.push(a),a={},i[i.length-1][o]=a,s=0):(s++,l=c):3===s&&(l+=c);else if(1===s)s++;else if(3===s){s=0;var d=e.parseValue(l);a.hasOwnProperty(o)?a[o].push(d):a[o]=[d]}}for(var f=[r],p=function(){var e=f.pop();Object.keys(e).forEach((function(t){var r=e[t];Array.isArray(r)?1===r.length?e[t]=r[0]:r.forEach((function(e){return f.push(e)})):Object.keys(r).length>1&&f.push(r)}))};f.length>0;)p();return Object.values(r["Lego*"].Levels).forEach((function(e){e.CryoreMap&&(e.CryOreMap=e.CryoreMap,delete e.CryoreMap),e.CryOreMap&&(e.CryOreMap=e.CryOreMap.replace("Cryo_","Cror_")),e.PredugMap&&(e.PreDugMap=e.PredugMap,delete e.PredugMap);var t=e.TextureSet;Array.isArray(t)&&Array.isArray(t[1])&&(e.TextureSet=t[1])})),r["Lego*"]},e.parseValue=function(t){function r(r){0===(t=t.split(r).filter((function(e){return""!==e})).map((function(t){return e.parseValue(t)}))).length?t="":1===t.length&&(t=t[0])}var i=Number(t);if(isNaN(i)){var a=(t=t.toString().replace(/\\/g,"/")).toLowerCase();return"true"===a||"false"!==a&&("null"===a?"":(t.includes(":")?r.call(this,":"):t.includes(",")?r.call(this,","):t.includes("|")&&r.call(this,"|"),t))}return i},e}(),O=function(){function e(){}return e.prototype.parseObjectiveTextFile=function(e){for(var t={},r=F.DROP,i=null,a="",n="",s=0;s<e.length;s++){var o=P[e[s]],l=String.fromCharCode(o);if(r===F.DROP)if("["===l)i&&(t[i.key]=i),i=new B,r=F.KEY;else if(i&&":"===l){var u=n.toLowerCase();for("objective"===u?(n="",r=F.OBJECTIVE):"failure"===u?(n="",r=F.FAILURE):"completion"===u?(n="",r=F.COMPLETION):"crystalfailure"===u&&(n="",r=F.CRYSTAL_FAILURE);s<e.length&&e[s+1]==="\t".charCodeAt(0);s++);}else"\n"===l||"\r"===l?n="":n+=l;else if(r===F.KEY)if("]"===l)i.key=a,a="",r=F.DROP;else{if("\n"===l||"\r"===l)throw"Malformed objective text file";a+=l}else r===F.OBJECTIVE?"\n"===l||"\r"===l?(i.objective=a,a="",r=F.DROP):a+=l:r===F.FAILURE?"\n"===l||"\r"===l?(i.failure=a,a="",r=F.DROP):a+=l:r===F.COMPLETION?"\n"===l||"\r"===l?(i.completion=a,a="",r=F.DROP):a+=l:r===F.CRYSTAL_FAILURE&&("\n"===l||"\r"===l?(i.crystalFailure=a,a="",r=F.DROP):a+=l)}return i&&(t[i.key]=i),i=null,t},e}();!function(e){e[e.DROP=0]="DROP",e[e.KEY=1]="KEY",e[e.OBJECTIVE=2]="OBJECTIVE",e[e.FAILURE=3]="FAILURE",e[e.COMPLETION=4]="COMPLETION",e[e.CRYSTAL_FAILURE=5]="CRYSTAL_FAILURE"}(F||(F={}));var B=function(){},I=function(){function e(){}return e.parse=function(t){var r=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n").replace(/\t/g," ").split("\n").map((function(e){var t=e.indexOf("//");t>-1&&(e=e.substring(0,t));var r=e.indexOf(";");return r>-1&&(e=e.substring(0,r)),e})).map((function(e){return e.trim()})).filter((function(e){return""!==e})).map((function(e){return e.split(" ").filter((function(e){return""!==e}))})),i={};return e.parseObj(i,r,0),i},e.parseObj=function(e,t,r){for(var i=this,a=r;a<t.length;a++){var n=t[a],s=n[0],o=n[1],l=s.toLowerCase();if("{"===o)e[l]={},a=this.parseObj(e[l],t,a+1);else{if("}"===l)return a;for(var u=o.split(":").filter((function(e){return""!==e})).map((function(e){return e.split(",").map((function(e){return e.split("|").map((function(e){return i.parseValue(e)}))}))}));1===u.length;)u=u[0];e[l]=u}}return t.length},e.parseValue=function(e){var t=Number(e),r=e.toLowerCase();return isNaN(t)?"false"!==r&&("true"===r||e):t},e}(),k=function(){function e(){this.buffer=null,this.entryIndexByName=new Map,this.fLength=[],this.fStart=[]}return e.prototype.parseWadFile=function(e,t){void 0===t&&(t=!1);var r=new DataView(e);this.buffer=new Int8Array(e);var i=0;if("WWAD"!==String.fromCharCode.apply(null,this.buffer.slice(i,4)))throw"Invalid WAD0 file provided";t&&console.log("WAD0 file seems legit"),i=4;var a=r.getInt32(i,!0);t&&console.log(a);for(var n=i=8,s=0;s<a;i++)0===this.buffer[i]&&(this.entryIndexByName.set(String.fromCharCode.apply(null,this.buffer.slice(n,i)).replace(/\\/g,"/").toLowerCase(),s),n=i+1,s++);for(t&&console.log(this.entryIndexByName),s=0;s<a;i++)0===this.buffer[i]&&(n=i+1,s++);for(t&&console.log("Offset after absolute original names is "+i),s=0;s<a;s++)this.fLength[s]=r.getInt32(i+8,!0),this.fStart[s]=r.getInt32(i+12,!0),i+=16;t&&(console.log(this.fLength),console.log(this.fStart))},e.prototype.getEntryData=function(e){return new Uint8Array(this.getEntryBuffer(e))},e.prototype.getEntryText=function(e){var t="";return this.getEntryData(e).forEach((function(e){return t+=String.fromCharCode(P[e])})),t},e.prototype.getEntryBuffer=function(e){var t=this.entryIndexByName.get(e.toLowerCase());if(null==t)throw"Entry '"+e+"' not found in WAD file";return this.buffer.slice(this.fStart[t],this.fStart[t]+this.fLength[t])},e.prototype.filterEntryNames=function(e){var t=new RegExp(e.toLowerCase()),r=[];return this.entryIndexByName.forEach((function(e,i){i.match(t)&&r.push(i)})),r},e}();function M(e){if(!e)return e;var t=e.toString().replace(/\\/g,"/");t.startsWith("/")&&(t=t.substring(1));var r=t.lastIndexOf("/");return(t=t.substring(0,r+1)).startsWith("/")&&(t=t.substring(1)),t}function _(e){if(!e)return e;var t=e.toString().replace(/\\/g,"/");t.startsWith("/")&&(t=t.substring(1));var r=t.lastIndexOf("/");return t.substring(r+1)}function x(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach((function(t){e=(e=Object.keys(e).filter((function(e){return e.toLowerCase()===t.toLowerCase()})).map((function(t){return e[t]})))?e[0]:e})),e}var H,N=function(){function e(){this.wad0File=null,this.wad1File=null,this.assetIndex=0,this.totalResources=0,this.assetsFromCfgByName=new Map,this.onMessage=function(e){console.log(e)},this.onInitialLoad=function(){console.log("Initial loading done.")},this.onAssetLoaded=function(){},this.onLoadDone=function(e,t){console.log("Loading of about "+e+" assets complete! Total load time: "+t+" seconds.")}}return e.prototype.loadWadImageAsset=function(e,t){var r=this.wad0File.getEntryData(e);t(D.parse(r))},e.prototype.loadWadTexture=function(t,r){var i=this.wad0File.getEntryData(t),a=_(t).match(/^a(\d+).+/i),n=a?parseInt(a[1]):null,s=D.parse(i,n);t.toLowerCase().startsWith("miscanims/crystal")?r(e.grayscaleToGreen(s)):r(s)},e.grayscaleToGreen=function(e){for(var t=e.data,r=0;r<t.length;r+=4)t[r]=0,t[r+2]=0;return e},e.prototype.loadAlphaImageAsset=function(e,t){for(var r=this.wad0File.getEntryData(e),i=D.parse(r),a=0;a<i.data.length;a+=4)i.data[a]<=2&&i.data[a+1]<=2&&i.data[a+2]<=2&&(i.data[a+3]=0);t(i)},e.prototype.loadFontImageAsset=function(e,t){var r=this.wad0File.getEntryData(e);t(D.parse(r))},e.prototype.loadNerpAsset=function(e,t){e=e.replace(/.npl$/,".nrn"),t(this.wad0File.getEntryText(e))},e.prototype.loadNerpMsg=function(e,t){for(var r=this.parseNerpMsgFile(this.wad0File,e),i=this.parseNerpMsgFile(this.wad1File,e),a=0;a<i.length;a++){var n=i[a];n&&(n.txt&&(r[a].txt=n.txt),n.snd&&(r[a].snd=n.snd))}t(r)},e.prototype.parseNerpMsgFile=function(e,t){for(var r=[],i=e.getEntryText(t).split(/[\r\n]/).map((function(e){return null==e?void 0:e.trim()})).filter((function(e){return!!e})),a=0;a<i.length;a++){var n=i[a];if("-"!==n){var s=n.match(/\\\[([^\\]+)\\](\s*#([^#]+)#)?/),o=n.match(/^([^$][^#]+)(\s*#([^#]+)#)?/),l=n.match(/\$([^\s]+)\s*([^\s]+)/);if(e===this.wad0File&&s)r[u=void 0!==s[3]?this.numericNameToNumber(s[3]):a]=r[u]||{},r[u].txt=s[1];else if(e===this.wad1File&&o)r[u=void 0!==o[3]?this.numericNameToNumber(o[3]):a]=r[u]||{},r[u].txt=o[1].replace(/_/g," ").trim();else{if(!l||3!==l.length)throw"Line in nerps message file did not match anything";var u;r[u=this.numericNameToNumber(l[1])]=r[u]||{},r[u].snd=l[2].replace(/\\/g,"/")}}}return r},e.prototype.numericNameToNumber=function(e){if(void 0===e)throw"Numeric name must not be undefined";var t={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9},r={twenty:20,thirty:30,forty:40},i={ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19}[e]||t[e];if(void 0===i&&Object.keys(r).forEach((function(a){if(e.startsWith(a)){var n=e.replace(a,"");i=r[a]+(n?t[n]:0)}})),void 0===i)throw"Found unexpected numeric name "+e;return i},e.prototype.loadObjectiveTexts=function(e,t){var r=this.wad1File.getEntryData(e);t((new O).parseObjectiveTextFile(r))},e.prototype.loadMapAsset=function(e,t){var r=this.wad0File.getEntryData(e);if(r.length<13||"MAP"!==String.fromCharCode.apply(String,r.slice(0,3)))console.log("Invalid map data provided");else{for(var i={width:r[8],height:r[12],level:[]},a=[],n=16;n<r.length;n+=2)a.push(r[n]),a.length>=i.width&&(i.level.push(a),a=[]);t(i)}},e.prototype.loadObjectListAsset=function(e,t){for(var r=this.wad0File.getEntryText(e).split("\n"),i=[],a=null,n=0;n<r.length;n++){var s=r[n].trim(),o=s.match(/(.+)\s+{/),l=s.match(/driving\s+(.+)/);if(s.length<1||s.startsWith(";")||s.startsWith("Lego*"));else if(o)a={},i[o[1]]=a;else if("}"===s)a=null;else if(l)a.driving=l[1];else{var u=s.split(/\s+/);if(2!==u.length||null===a)throw"Unexpected key value entry: "+s;var h=u[0],c=u[1];if("xPos"===h||"yPos"===h||"heading"===h)c=parseFloat(c);else if("type"!==h)throw"Unexpected key value entry: "+s;a[h]=c}}t(i)},e.prototype.loadWavAsset=function(e,t,r){console.error("wav asset loading not yet implemented")},e.prototype.loadLWOFile=function(e,t){var r;try{r=this.wad0File.getEntryBuffer(e)}catch(t){try{r=this.wad0File.getEntryBuffer("world/shared/"+_(e))}catch(t){return void console.error("Could not load LWO file "+e+"; Error: "+t)}}t(r.buffer)},e.prototype.registerAllAssets=function(e){var t=this;this.addAssetFolder(this.loadFontImageAsset,"Interface/Fonts/"),this.addAssetFolder(this.loadAlphaImageAsset,"Interface/Pointers/"),this.addMenuWithAssets(e,"MainMenuFull",!1),this.addMenuWithAssets(e,"PausedMenu"),this.addMenuWithAssets(e,"OptionsMenu"),this.addAsset(this.loadAlphaImageAsset,"Interface/BriefingPanel/BriefingPanel.bmp"),this.addAsset(this.loadObjectiveTexts,"Languages/ObjectiveText.txt"),this.addAlphaImageFolder("Interface/TopPanel/"),this.addAlphaImageFolder("Interface/RightPanel/"),this.addAlphaImageFolder("Interface/RadarPanel/"),this.addAlphaImageFolder("Interface/MessagePanel/"),this.addAsset(this.loadWadImageAsset,"Interface/Airmeter/msgpanel_air_juice.bmp"),this.addAlphaImageFolder("Interface/InfoPanel/"),this.addAlphaImageFolder("Interface/PriorityPanel/"),this.addAlphaImageFolder("Interface/Priorities"),this.addAlphaImageFolder("Interface/CameraControl/"),this.addAlphaImageFolder("Interface/MessageTabs/"),this.addAlphaImageFolder("Interface/IconPanel/"),this.addAlphaImageFolder("Interface/Icons/"),this.addAlphaImageFolder("Interface/Menus/"),this.addAlphaImageFolder("Interface/Buttons/"),this.addAlphaImageFolder("Interface/InfoImages/"),this.addAssetFolder(this.loadAlphaImageAsset,"Interface/FrontEnd/Vol_"),this.addAssetFolder(this.loadWadImageAsset,"Interface/FrontEnd/lp_"),this.addAsset(this.loadAlphaImageAsset,"Interface/FrontEnd/LowerPanel.bmp"),this.addAsset(this.loadNerpAsset,"Levels/nerpnrn.h");var r=new o(x(e,"Levels"));this.onAssetLoaded(0,"Levels",r),Object.values(r.levelsByName).forEach((function(e){e.menuBMP.forEach((function(e){t.addAsset(t.loadAlphaImageAsset,e)})),t.addAsset(t.loadMapAsset,e.surfaceMap),t.addAsset(t.loadMapAsset,e.predugMap),t.addAsset(t.loadMapAsset,e.terrainMap),t.addAsset(t.loadMapAsset,e.blockPointersMap,!0),t.addAsset(t.loadMapAsset,e.cryOreMap),t.addAsset(t.loadMapAsset,e.pathMap,!0),e.fallinMap&&t.addAsset(t.loadMapAsset,e.fallinMap),e.erodeMap&&t.addAsset(t.loadMapAsset,e.erodeMap),t.addAsset(t.loadObjectListAsset,e.oListFile),t.addAsset(t.loadNerpAsset,e.nerpFile),t.addAsset(t.loadNerpMsg,e.nerpMessageFile)})),this.addTextureFolder("World/Shared/");var i=e.BuildingTypes;Object.values(i).forEach((function(e){var r=e.split("/")[1],i=e+"/"+r+".ae";t.addAnimatedEntity(i)})),this.addAnimatedEntity("mini-figures/pilot/pilot.ae"),this.addAnimatedEntity("Creatures/SpiderSB/SpiderSB.ae"),this.addAnimatedEntity("Creatures/bat/bat.ae"),this.addAnimatedEntity(x(e,"MiscObjects","Dynamite")+"/Dynamite.ae"),this.addAnimatedEntity(x(e,"MiscObjects","Barrier")+"/Barrier.ae"),this.addAsset(this.loadLWOFile,"World/Shared/Crystal.lwo"),this.addAsset(this.loadLWOFile,x(e,"MiscObjects","Crystal")+".lwo"),this.addTextureFolder("MiscAnims/Crystal/"),this.addAsset(this.loadLWOFile,x(e,"MiscObjects","Ore")+".lwo"),this.addAsset(this.loadWadTexture,"MiscAnims/Ore/Ore.bmp"),this.addAsset(this.loadLWOFile,"World/Shared/Brick.lwo"),this.addAsset(this.loadLWOFile,x(e,"MiscObjects","ProcessedOre")+".lwo"),this.addAsset(this.loadLWOFile,x(e,"MiscObjects","ElectricFence")+".lwo"),this.addTextureFolder("Buildings/E-Fence/"),this.addAnimatedEntity(x(e,"MiscObjects","Barrier")+"/Barrier.ae"),this.addAnimatedEntity("MiscAnims/Dynamite/Dynamite.ae"),this.addLWSFile("MiscAnims/RockFall/Rock3Sides.lws"),this.addTextureFolder("MiscAnims/RockFall/"),this.addTextureFolder("World/WorldTextures/IceSplit/Ice"),this.addTextureFolder("World/WorldTextures/LavaSplit/Lava"),this.addTextureFolder("World/WorldTextures/RockSplit/Rock");var a=new A(x(e,"Reward"));this.onAssetLoaded(0,"Reward",a),this.addAsset(this.loadWadImageAsset,a.wallpaper),this.addAsset(this.loadFontImageAsset,a.backFont),Object.values(a.fonts).forEach((function(e){return t.addAsset(t.loadFontImageAsset,e)})),a.images.forEach((function(e){return t.addAsset(t.loadAlphaImageAsset,e.filePath)})),a.boxImages.forEach((function(e){return t.addAsset(t.loadWadImageAsset,e.filePath)})),a.saveButton.splice(0,4).forEach((function(e){return t.addAsset(t.loadWadImageAsset,e)})),a.advanceButton.splice(0,4).forEach((function(e){return t.addAsset(t.loadWadImageAsset,e)}))},e.prototype.addAnimatedEntity=function(e){var t=this,r=this.wad0File.getEntryText(e),i=x(I.parse(r),"Lego*");this.onAssetLoaded(0,e,i);var a=M(e);["HighPoly","MediumPoly","LowPoly"].forEach((function(e){var r=x(i,e);r&&Object.keys(r).forEach((function(e){t.addAsset(t.loadLWOFile,a+r[e]+".lwo")}))}));var n=x(i,"Activities");n&&Object.keys(n).forEach((function(e){try{var r=x(n,e),s=x(i,r),o=x(s,"FILE");!0===x(s,"LWSFILE")?t.addLWSFile(a+o+".lws"):console.error("Found activity which is not an LWS file")}catch(t){console.error(t),console.log(i),console.log(n),console.log(e)}})),this.addTextureFolder(M(e))},e.prototype.addLWSFile=function(e){var t=this,r=this.wad0File.getEntryText(e);this.onAssetLoaded(0,e,r),this.extractLwoFiles(M(e),r).forEach((function(e){return t.addAsset(t.loadLWOFile,e)}))},e.prototype.extractLwoFiles=function(e,t){var r=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n").replace(/\t/g," ").split("\n").map((function(e){return e.trim()}));if("LWSC"!==r[0])throw"Invalid start of file! Expected 'LWSC' in first line";return r.filter((function(e){return e.toLowerCase().startsWith("LoadObject ".toLowerCase())})).map((function(t){return e+_(t.substring("LoadObject ".length)).toLowerCase()}))},e.prototype.addAlphaImageFolder=function(e){this.addAssetFolder(this.loadAlphaImageAsset,e)},e.prototype.addTextureFolder=function(e){this.addAssetFolder(this.loadWadTexture,e)},e.prototype.addAssetFolder=function(e,t){var r=this;this.wad0File.filterEntryNames(t+".+\\.bmp").forEach((function(t){r.addAsset(e,t)}))},e.prototype.addMenuWithAssets=function(e,t,r){var i=this;void 0===r&&(r=!0);var a=new v(x(e,"Menu",t));this.onAssetLoaded(0,t,a),a.menus.forEach((function(e){var t=r?i.loadAlphaImageAsset:i.loadWadImageAsset,a=Array.isArray(e.menuImage)?e.menuImage[0]:e.menuImage;i.addAsset(t,a),i.addAsset(i.loadFontImageAsset,e.menuFont),i.addAsset(i.loadFontImageAsset,e.loFont),i.addAsset(i.loadFontImageAsset,e.hiFont)}))},e.prototype.addAsset=function(e,t,r){void 0===r&&(r=!1),t&&!this.assetsFromCfgByName.hasOwnProperty(t)&&"NULL"!==t&&this.assetsFromCfgByName.set(t,{method:e.bind(this),assetPath:t,optional:r})},e.prototype.loadAssetsParallel=function(){var e=this,t=[],r=this;this.assetsFromCfgByName.forEach((function(i){t.push(new Promise((function(t){try{i.method(i.assetPath,(function(a){e.assetIndex++,r.onAssetLoaded(e.assetIndex,i.assetPath,a),t()}))}catch(a){if(!i.optional)throw a;e.assetIndex++,r.onAssetLoaded(e.assetIndex,i.assetPath,null),t()}})))})),Promise.all(t).then((function(){var t=(((new Date).getTime()-e.startTime.getTime())/1e3).toFixed(3).toString();e.onLoadDone(e.totalResources,t)}))},e.prototype.startWithCachedFiles=function(e){var t=this;this.startTime=new Date;var r=function(){t.onMessage("WAD files not found in cache"),e()};this.onMessage("Loading WAD files from cache...");var i=this;this.openLocalCache((function(e){var t=e.get("wad0");t.onerror=r,t.onsuccess=function(){if(void 0!==t.result){for(var a in i.wad0File=new k,t.result)t.result.hasOwnProperty(a)&&(i.wad0File[a]=t.result[a]);var n=e.get("wad1");n.onerror=r,n.onsuccess=function(){if(void 0!==n.result){for(var e in i.wad1File=new k,n.result)n.result.hasOwnProperty(e)&&(i.wad1File[e]=n.result[e]);console.log("WAD files loaded from cache after "+((new Date).getTime()-i.startTime.getTime())/1e3),i.startLoadingProcess()}else r()}}else r()}}))},e.prototype.loadWadFiles=function(e,t){var r=this,i=this;Promise.all([this.loadWadFile(e),this.loadWadFile(t)]).then((function(e){i.wad0File=e[0],i.wad1File=e[1],r.openLocalCache((function(e){e.put(i.wad0File,"wad0"),e.put(i.wad1File,"wad1")})),r.startLoadingProcess()}))},e.prototype.loadWadFile=function(e){return new Promise((function(t){console.log("Loading WAD file from "+e),fetch(e).then((function(e){e.ok&&e.arrayBuffer().then((function(e){var r=new k;r.parseWadFile(e),t(r)}))})).catch((function(e){return console.error(e)}))}))},e.prototype.openLocalCache=function(e){var t=indexedDB.open("RockRaidersWeb");t.onupgradeneeded=function(){var e=t.result;e.objectStoreNames.contains("wadfiles")&&e.deleteObjectStore("wadfiles"),e.createObjectStore("wadfiles")},t.onsuccess=function(){var r=t.result.transaction(["wadfiles"],"readwrite").objectStore("wadfiles");e(r)}},e.prototype.startLoadingProcess=function(){var e=this;this.startTime=new Date,this.assetsFromCfgByName=new Map,this.onMessage("Loading configuration...");var t=E.parse(this.wad1File.getEntryData("Lego.cfg"));this.registerAllAssets(t),this.onMessage("Loading initial assets..."),Promise.all([new Promise((function(r){var i=x(t,"Main","LoadScreen");e.loadWadImageAsset(i,(function(t){e.onAssetLoaded(0,i,t),r()}))})),new Promise((function(r){var i=x(t,"Main","ProgressBar");e.loadWadImageAsset(i,(function(t){e.onAssetLoaded(0,i,t),r()}))})),new Promise((function(r){var i=x(t,"Pointers","Pointer_Standard");e.loadAlphaImageAsset(i,(function(t){e.onAssetLoaded(0,i,t),r()}))})),new Promise((function(t){var r="Interface/Fonts/Font5_Hi.bmp";e.loadFontImageAsset(r,(function(i){e.onAssetLoaded(0,r,i),t()}))}))]).then((function(){e.onMessage("Start loading assets..."),e.totalResources=e.assetsFromCfgByName.size,e.onInitialLoad(e.totalResources,t),e.assetIndex=0,e.loadAssetsParallel()}))},e}(),W=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=0,t.SelfPowered=!1,t.PowerBuilding=!1,t.PickSphere=0,t.TrainDynamite=null,t.CostOre=0,t.CostCrystal=0,t.OxygenCoef=0,t}return W(t,e),t}(i),j=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.RouteSpeed=[],t.RubbleCoef=1,t.PathCoef=1,t}return j(t,e),t}(i),V=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),z=function(e){function t(t){var r=e.call(this)||this;return r.Pilot=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=4,t.RouteSpeed=[1.1,1.1,1.1,1.1],t.SoilDrillTime=[4,4,4,4],t.LooseDrillTime=[4,4,4,4],t.MedDrillTime=[8,8,8,8],t.HardDrillTime=[0,0,0,0],t.SeamDrillTime=[10,10,10,10],t.UpgradeTime=[30,45,60,60],t.CollRadius=5,t.CollHeight=12,t.TrackDist=40,t.SingleWidthDig=[!0,!0,!0,!0],t.PickSphere=10,t.RepairValue=[10,15,20,25],t.SurveyRadius=[3,3,3,3],t.Drillsound="SND_pilotdrill",t.Drillfadesound="SND_pilotdrillfade",t.RestPercent=60,t.EnergyDecayRate=.25,t.CanClearRubble=!0,t.NumOfToolsCanCarry=[2,3,4,5],t.CrossLand=!0,t.RubbleCoef=.5,t.PathCoef=2,t.RouteAvoidance=!0,t.UseLegoManTeleporter=!0,t.AwarenessRange=10,t.OxygenCoef=-1,t.CanStrafe=!0,t.EnterToolStore=!0,t.ShowHealthBar=!0,t}return V(t,e),t}(i)),r.RockMonster=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.RouteSpeed=.8,t.TrackDist=50,t.CollRadius=10,t.CollHeight=22,t.AlertRadius=60,t.HealthDecayRate=.6,t.PickSphere=22,t.RepairValue=-10,t.CanScare=!0,t.RestPercent=20,t.CarryMinHealth=15,t.PainThreshold=20,t.StampRadius=80,t.AttackRadius=160,t.CanSteal=!0,t.CrossLand=!0,t.RubbleCoef=1.5,t.GrabMinifigure=!0,t.RouteAvoidance=!0,t.BumpDamage=!0,t.AttackPaths=!0,t.SplitOnZeroHealth=!0,t.CanBeHitByFence=!0,t.Capacity=6,t.PathCoef=.5,t.CanBeShotAt=!0,t.CanFreeze=!0,t.FreezerTime=25,t.FreezerDamage=5,t.CanLaser=!0,t.LaserDamage=110,t.CanPush=!0,t.PusherDist=20,t.PusherDamage=2,t.WakeRadius=25,t.ScaredByBigBangs=!0,t.RemoveReinforcement=!0,t.ShowHealthBar=!0,t}return V(t,e),t}(i)),r.SmallSpider=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.RouteSpeed=[2],t.TrackDist=10,t.CollRadius=0,t.CollHeight=0,t.PickSphere=6,t.AlertRadius=40,t.RandomMove=!0,t.RandomEnterWall=!0,t.CauseSlip=!0,t.CrossLand=!0,t.RubbleCoef=.2,t.DontShowDamage=!0,t.DontShowOnRadar=!0,t.ScaredByBigBangs=!0,t}return V(t,e),t}(G)),r.Bat=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.RouteSpeed=[1],t.TrackDist=10,t.CollRadius=10,t.AlertRadius=10,t.RandomMove=!0,t.randomMoveTime=10,t.CanScare=!0,t.ScaredByBigBangs=!0,t.Flocks=!0,t.FlocksDebug=!1,t.FlocksSmooth=!0,t.FlocksSize=8,t.FlocksTurn=.6,t.FlocksSpeed=1.5,t.FlocksTightness=.8,t.FlocksGoalUpdate=2,t.FlocksRandomness=6,t.FlocksHeight=22,t.CrossLand=!0,t.CrossWater=!0,t.CrossLava=!0,t.DontShowDamage=!0,t}return V(t,e),t}(G)),r.TinyRM=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.RouteSpeed=1.2,t.TrackDist=10,t.CollRadius=0,t.CollHeight=5,t.PickSphere=6,t.AlertRadius=40,t.CrossLand=!0,t.RubbleCoef=1.5,t.DontShowDamage=!0,t.DontShowOnRadar=!0,t.ScaredByPlayer=!0,t.ScaredByBigBangs=!0,t}return V(t,e),t}(i)),r.TinyIM=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.RouteSpeed=1.2,t.TrackDist=10,t.CollRadius=0,t.CollHeight=5,t.PickSphere=6,t.AlertRadius=40,t.CrossLand=!0,t.RubbleCoef=1.5,t.DontShowDamage=!0,t.DontShowOnRadar=!0,t.ScaredByPlayer=!0,t.ScaredByBigBangs=!0,t}return V(t,e),t}(i)),r.Slug=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.RouteSpeed=.3,t.TrackDist=10,t.CollRadius=3,t.CollHeight=7,t.PickSphere=12,t.AlertRadius=40,t.CrossLand=!0,t.RubbleCoef=.3,t.UseHoles=!0,t.DrainPower=!0,t.AttackRadius=280,t.PainThreshold=50,t.CanBeShotAt=!0,t.CanLaser=!0,t.LaserDamage=5,t.CanPush=!0,t.PusherDist=60,t.PusherDamage=5,t.ShowHealthBar=!0,t.ScaredByBigBangs=!0,t}return V(t,e),t}(i)),r.LavaMonster=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.RouteSpeed=.8,t.TrackDist=50,t.CollRadius=10,t.CollHeight=22,t.AlertRadius=60,t.HealthDecayRate=.6,t.PickSphere=22,t.RepairValue=-10,t.CanScare=!0,t.RestPercent=20,t.CarryMinHealth=15,t.PainThreshold=20,t.StampRadius=80,t.AttackRadius=160,t.CanSteal=!0,t.CrossLand=!0,t.RubbleCoef=1.5,t.GrabMinifigure=!0,t.Capacity=7,t.RouteAvoidance=!0,t.BumpDamage=!0,t.AttackPaths=!0,t.SplitOnZeroHealth=!0,t.CanBeHitByFence=!0,t.PathCoef=.5,t.CrossLava=!0,t.CanBeShotAt=!0,t.CanFreeze=!0,t.FreezerTime=75,t.FreezerDamage=40,t.CanLaser=!0,t.LaserDamage=1,t.CanPush=!0,t.PusherDist=60,t.PusherDamage=5,t.WakeRadius=25,t.ScaredByBigBangs=!0,t.RemoveReinforcement=!0,t.ShowHealthBar=!0,t}return V(t,e),t}(i)),r.IceMonster=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.RouteSpeed=.8,t.TrackDist=50,t.CollRadius=10,t.CollHeight=22,t.AlertRadius=60,t.HealthDecayRate=.6,t.PickSphere=22,t.RepairValue=-10,t.CanScare=!0,t.RestPercent=20,t.CarryMinHealth=15,t.PainThreshold=20,t.StampRadius=80,t.AttackRadius=120,t.CanSteal=!0,t.CrossLand=!0,t.RubbleCoef=1.5,t.GrabMinifigure=!0,t.Capacity=5,t.RouteAvoidance=!0,t.BumpDamage=!0,t.AttackPaths=!0,t.SplitOnZeroHealth=!0,t.CanBeHitByFence=!0,t.PathCoef=.5,t.CanBeShotAt=!0,t.CanFreeze=!1,t.FreezerTime=0,t.FreezerDamage=0,t.CanLaser=!0,t.LaserDamage=110,t.CanPush=!0,t.PusherDist=60,t.PusherDamage=2,t.WakeRadius=25,t.ScaredByBigBangs=!0,t.RemoveReinforcement=!0,t.ShowHealthBar=!0,t}return V(t,e),t}(i)),r.Hoverboard=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=8,t.RouteSpeed=[3,3,5,5,3,3,5,5],t.SurveyRadius=[0,0,0,0,4,4,4,4],t.TrackDist=50,t.CollRadius=8,t.CollHeight=12,t.PickSphere=16,t.CanBeDriven=!0,t.CrossLand=!0,t.UseSmallTeleporter=!0,t.CanStrafe=!0,t.CostCrystal=1,t.UpgradeCostOre=[0,5,10,0],t.UpgradeCostStuds=[0,1,2,0],t.ShowHealthBar=!0,t.EngineSound="SND_SmallEngine",t}return V(t,e),t}(i)),r.SmallHeli=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.RouteSpeed=2.5,t.TrackDist=50,t.CollRadius=10,t.CollHeight=12,t.PickSphere=20,t.CanBeDriven=!0,t.CrossLand=!0,t.CrossWater=!0,t.CrossLava=!0,t.UseSmallTeleporter=!0,t.CanStrafe=!0,t.CostCrystal=3,t.ShowHealthBar=!0,t.EngineSound="SND_HeliEngine",t}return V(t,e),t}(i)),r.Smallmlp=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=4,t.RouteSpeed=[.5,.5,.5,.5],t.TrackDist=50,t.CollRadius=12,t.CollHeight=22,t.PickSphere=26,t.CanBeDriven=!0,t.CrossLand=!0,t.UseSmallTeleporter=!0,t.Tracker=!0,t.CanDoubleSelect=!0,t.CostCrystal=3,t.UpgradeCostOre=[0,0,0,10],t.UpgradeCostStuds=[0,0,0,2],t.ShowHealthBar=!0,t.EngineSound="SND_MediumEngine",t}return V(t,e),t}(i)),r.SmallCat=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=3,t.RouteSpeed=[2,3,4],t.TrackDist=50,t.CollRadius=12,t.CollHeight=12,t.PickSphere=26,t.CrossWater=!0,t.CanBeDriven=!0,t.UseWaterTeleporter=!0,t.CostCrystal=2,t.MaxCarry=[1,1,1],t.GetInAtLand=!0,t.GetOutAtLand=!0,t.TakeCarryingDrivers=!0,t.ShowHealthBar=!0,t.EngineSound="SND_Catamaran",t}return V(t,e),t}(i)),r.SmallDigger=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=8,t.RouteSpeed=[2,2,4,4,2,2,4,4],t.SoilDrillTime=[1,1,1,1,1,1,1,1],t.LooseDrillTime=[2,1,2,1,2,1,2,1],t.MedDrillTime=[4,2,4,2,4,2,4,2],t.HardDrillTime=[180,150,180,150,180,150,180,150],t.SeamDrillTime=[8,4,8,4,8,4,8,4],t.MaxCarry=[0,0,0,0,0,0,0,0],t.SurveyRadius=[0,0,0,0,4,4,4,4],t.TrackDist=50,t.CollRadius=10,t.CollHeight=12,t.PickSphere=20,t.CanBeDriven=!0,t.CrossLand=!0,t.RouteAvoidance=!0,t.UseSmallTeleporter=!0,t.VehicleCanBeCarried=!0,t.CostCrystal=1,t.UpgradeCostOre=[0,5,10,10],t.UpgradeCostStuds=[0,1,2,2],t.ShowHealthBar=!0,t.EngineSound="SND_SmallEngine",t}return V(t,e),t}(i)),r.SmallTruck=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=16,t.RouteSpeed=[2,2,3,3,2,2,3,3,2,2,3,3,2,2,3,3],t.MaxCarry=[3,3,3,3,3,3,3,3,6,6,6,6,6,6,6,6],t.CarryStart=[0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3],t.SurveyRadius=[0,0,0,0,4,4,4,4,0,0,0,0,4,4,4,4],t.TrackDist=50,t.CollRadius=10,t.CollHeight=12,t.PickSphere=20,t.CanBeDriven=!0,t.CrossLand=!0,t.UseSmallTeleporter=!0,t.VehicleCanBeCarried=!0,t.CostCrystal=2,t.EnterToolStore=!0,t.UpgradeCostOre=[5,5,10,0],t.UpgradeCostStuds=[1,1,2,0],t.ShowHealthBar=!0,t.EngineSound="SND_SmallEngine",t}return V(t,e),t}(i)),r.Bulldozer=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=16,t.RouteSpeed=[.5,.5,.8,.8,.5,.5,.8,.8,.5,.5,.8,.8,.5,.5,.8,.8],t.MaxCarry=[0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2],t.SurveyRadius=[0,0,0,0,5,5,5,5,0,0,0,0,5,5,5,5],t.TrackDist=80,t.CollRadius=18,t.CollHeight=26,t.PickSphere=40,t.CrossLand=!0,t.CanClearRubble=!0,t.UseBigTeleporter=!0,t.CanBeDriven=!0,t.CostCrystal=4,t.InvisibleDriver=!0,t.UpgradeCostOre=[5,5,20,0],t.UpgradeCostStuds=[1,1,4,0],t.ShowHealthBar=!0,t.EngineSound="SND_MediumEngine",t}return V(t,e),t}(i)),r.WalkerDigger=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=8,t.RouteSpeed=[.5,.5,.8,.8,.5,.5,.8,.8],t.SoilDrillTime=[1,1,1,1,1,1,1,1],t.LooseDrillTime=[.8,.4,.8,.4,.8,.4,.8,.4],t.MedDrillTime=[2,1,2,1,2,1,2,1],t.HardDrillTime=[180,150,180,150,180,150,180,150],t.SeamDrillTime=[4,2,4,2,4,2,4,2],t.SurveyRadius=[0,0,0,0,5,5,5,5],t.TrackDist=80,t.CollRadius=15,t.CollHeight=33,t.PickSphere=35,t.CrossLand=!0,t.UseBigTeleporter=!0,t.CostCrystal=3,t.CanBeDriven=!0,t.InvisibleDriver=!0,t.CanStrafe=!0,t.DrillSound="DrillSFX_Grinder",t.DrillFadeSound="DrillSFX_GrinderFade",t.UpgradeCostOre=[0,5,20,20],t.UpgradeCostStuds=[0,1,4,4],t.ShowHealthBar=!0,t.EngineSound="SND_MediumEngine",t}return V(t,e),t}(i)),r.LargeDigger=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=4,t.RouteSpeed=[.3,.3,.6,.6],t.SoilDrillTime=[1,1,1,1],t.LooseDrillTime=[.4,.2,.4,.2],t.MedDrillTime=[.8,.4,.8,.4],t.HardDrillTime=[1,.5,1,.5],t.SeamDrillTime=[1,.5,1,.5],t.TrackDist=80,t.CollRadius=22,t.CollHeight=30,t.PickSphere=50,t.CrossLand=!0,t.UseBigTeleporter=!0,t.Tracker=!0,t.CanDoubleSelect=!0,t.CanBeDriven=!0,t.CostCrystal=5,t.InvisibleDriver=!0,t.DrillSound="DrillSFX_Grinder",t.DrillFadeSound="DrillSFX_GrinderFade",t.UpgradeCostOre=[0,0,15,20],t.UpgradeCostStuds=[0,0,3,4],t.ShowHealthBar=!0,t.EngineSound="SND_LargeEngine",t}return V(t,e),t}(i)),r.LargeCat=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.RouteSpeed=1.5,t.SurveyRadius=0,t.TrackDist=80,t.CollRadius=22,t.CollHeight=25,t.PickSphere=50,t.CanBeDriven=!0,t.CrossWater=!0,t.UseWaterTeleporter=!0,t.ClassAsLarge=!0,t.CarryVehicles=!0,t.CostCrystal=4,t.EngineSound="SND_Catamaran",t.ShowHealthBar=!0,t}return V(t,e),t}(i)),r.LargeHeli=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=3,t.RouteSpeed=[.3,.4,.5],t.TrackDist=80,t.CollRadius=0,t.CollHeight=0,t.PickSphere=20,t.ShowHealthBar=!0,t.EngineSound="SND_HeliEngine",t}return V(t,e),t}(i)),r.LargeMLP=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=8,t.RouteSpeed=[.4,.4,.4,.4,.4,.4,.4,.4],t.SurveyRadius=[0,0,0,0,5,5,5,5],t.TrackDist=80,t.CollRadius=20,t.CollHeight=24,t.PickSphere=47,t.CrossLand=!0,t.UseBigTeleporter=!0,t.Tracker=!0,t.CanDoubleSelect=!0,t.CostCrystal=4,t.CanBeDriven=!0,t.InvisibleDriver=!0,t.UpgradeCostOre=[0,5,0,25],t.UpgradeCostStuds=[0,1,0,5],t.ShowHealthBar=!0,t.EngineSound="SND_LargeEngine",t}return V(t,e),t}(i)),r.Barracks=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=3,t.TrackDist=50,t.CollHeight=23,t.CollRadius=15,t.PickSphere=30,t.CostOre=15,t.CostRefinedOre=3,t.CostCrystal=3,t.SnaxULike=!0,t.TrainDriver=[!0,!0,!0],t.CrystalDrain=[1,1,1],t.DamageCausesCallToArms=!0,t.OxygenCoef=10,t.EngineSound="SND_BuildingHum",t.ShowHealthBar=!0,t}return V(t,e),t}(U)),r.Powerstation=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=2,t.TrackDist=80,t.ProcessCrystal=!0,t.CollHeight=31,t.CollRadius=15,t.PickSphere=32,t.CostOre=12,t.CostRefinedOre=3,t.CostCrystal=2,t.PowerBuilding=!0,t.DamageCausesCallToArms=!0,t.EngineSound="SND_PowerBuildingHum",t.ShowHealthBar=!0,t}return V(t,e),t}(U)),r.OreRefinery=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=4,t.TrackDist=60,t.ProcessOre=!0,t.CollHeight=16,t.CollRadius=15,t.PickSphere=30,t.CostOre=20,t.CostRefinedOre=4,t.CostCrystal=3,t.CrystalDrain=[1,1,1,1],t.DamageCausesCallToArms=!0,t.MaxCarry=[5,4,3,2],t.EngineSound="SND_BuildingHum",t.ShowHealthBar=!0,t}return V(t,e),t}(U)),r.TeleportPad=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=3,t.TrackDist=60,t.SmallTeleporter=!0,t.ManTeleporter=!0,t.CollHeight=20,t.CollRadius=15,t.PickSphere=30,t.CostOre=8,t.CostRefinedOre=2,t.CrystalDrain=[1,1,1],t.DamageCausesCallToArms=!0,t.TrainPilot=[!0,!0,!0],t.EngineSound="SND_BuildingHum",t.ShowHealthBar=!0,t}return V(t,e),t}(U)),r.TeleportBIG=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=2,t.TrackDist=50,t.BigTeleporter=!0,t.CollHeight=17,t.CollRadius=15,t.PickSphere=30,t.CostOre=20,t.CostRefinedOre=4,t.CostCrystal=2,t.CrystalDrain=[1,1],t.DamageCausesCallToArms=!0,t.EngineSound="SND_BuildingHum",t.ShowHealthBar=!0,t}return V(t,e),t}(U)),r.Docks=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.TrackDist=60,t.CollHeight=20,t.CollRadius=15,t.PickSphere=30,t.CostOre=8,t.CostRefinedOre=2,t.CostCrystal=1,t.WaterEntrances=1,t.WaterTeleporter=!0,t.CrystalDrain=1,t.DamageCausesCallToArms=!0,t.TrainSailor=!0,t.EngineSound="SND_BuildingHum",t.ShowHealthBar=!0,t}return V(t,e),t}(U)),r.Toolstation=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=3,t.TrackDist=50,t.ManTeleporter=!0,t.CollHeight=16,t.CollRadius=15,t.PickSphere=30,t.ToolStore=!0,t.StoreObjects=!0,t.SelfPowered=!0,t.DamageCausesCallToArms=!0,t.TrainDynamite=[!1,!1,!0],t.FunctionCoef=[1,1,1],t.ShowHealthBar=!0,t}return V(t,e),t}(U)),r.GunStation=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=2,t.TrackDist=60,t.CollHeight=33,t.CollRadius=15,t.PickSphere=30,t.CostOre=15,t.CostRefinedOre=3,t.CostCrystal=1,t.Tracker=!0,t.CanDoubleSelect=!0,t.CrystalDrain=[1,1],t.DamageCausesCallToArms=!0,t.FunctionCoef=[1,.5],t.EngineSound="SND_BuildingHum",t.ShowHealthBar=!0,t}return V(t,e),t}(U)),r.Geodome=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=3,t.TrackDist=50,t.CollHeight=20,t.CollRadius=15,t.PickSphere=30,t.CostOre=15,t.CostRefinedOre=3,t.CostCrystal=3,t.SurveyRadius=[6,8,12],t.CrystalDrain=[1,1,1],t.DamageCausesCallToArms=!0,t.TrainScanner=[!0,!0,!0],t.EngineSound="SND_BuildingHum",t.ShowHealthBar=!0,t}return V(t,e),t}(U)),r.Upgrade=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=2,t.TrackDist=80,t.CollHeight=40,t.CollRadius=15,t.PickSphere=32,t.CostOre=20,t.CostRefinedOre=4,t.CostCrystal=3,t.UpgradeBuilding=!0,t.CrystalDrain=[1,1],t.DamageCausesCallToArms=!0,t.FunctionCoef=[.8,1.6],t.TrainRepair=[!0,!0],t.EngineSound="SND_BuildingHum",t.ShowHealthBar=!0,t}return V(t,e),t}(U)),r.PowerCrystal=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.TrackDist=20,t.CollHeight=2,t.PickSphere=6,t}return V(t,e),t}(i)),r.ProcessedOre=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.TrackDist=20,t.CollHeight=2,t.PickSphere=8,t}return V(t,e),t}(i)),r.Ore=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.TrackDist=20,t.CollHeight=2,t.PickSphere=6,t}return V(t,e),t}(i)),r.Boulder=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.CollRadius=2,t}return V(t,e),t}(i)),r.Pusher=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.CollRadius=1,t}return V(t,e),t}(i)),r.Freezer=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.CollRadius=1,t}return V(t,e),t}(i)),r.LaserShot=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.ColRadius=1,t}return V(t,e),t}(i)),r.ElectricFence=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.TrackDist=50,t.CollRadius=5,t.CollHeight=18,t.PickSphere=20,t.DamageCausesCallToArms=!0,t}return V(t,e),t}(i)),r.Path=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Levels=1,t.CostOre=2,t.CostRefinedOre=1,t}return V(t,e),t}(i)),i.setFromCfg(r,t),r}return V(t,e),t.prototype.assignValue=function(e,t,r){if(e.toLowerCase()===t)return i.setFromCfg(this[e],r),!0},t}(i);!function(e){e[e.MSG=0]="MSG",e[e.CFG=1]="CFG",e[e.CACHE_MISS=2]="CACHE_MISS",e[e.SFX=3]="SFX",e[e.ASSET=4]="ASSET",e[e.DONE=5]="DONE"}(H||(H={}));var Y=function(){function e(e){this.type=null,this.type=e}return e.createTextMessage=function(e){return{type:H.MSG,text:e}},e.createCfgLoaded=function(e,t){return{type:H.CFG,cfg:e,stats:new z(e.Stats),totalResources:t}},e.createAssetLoaded=function(e,t,r){return{type:H.ASSET,assetName:t,assetObj:r}},e.createLoadDone=function(e,t){return{type:H.DONE,totalResources:e,loadingTimeSeconds:t}},e}(),X=self;function q(e){X.postMessage(e)}X.addEventListener("message",(function(e){var t=new N;t.onMessage=function(e){return q(Y.createTextMessage(e))},t.onInitialLoad=function(e,t){return q(Y.createCfgLoaded(t,e))},t.onAssetLoaded=function(e,t,r){q(Y.createAssetLoaded(e,t,r))},t.onLoadDone=function(e,t){q(Y.createLoadDone(e,t))};var r=e.data;r?t.loadWadFiles(r.wad0FileUrl,r.wad1FileUrl):t.startWithCachedFiles((function(){return q(new Y(H.CACHE_MISS))}))}))})();
//# sourceMappingURL=315.index.js.map
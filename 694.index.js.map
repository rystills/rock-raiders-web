{"version":3,"sources":["webpack://rock-raiders-web/./site/modal/WadFileSelectionModal.ts"],"names":["WadFileSelectionModal","parentId","onStart","rootElement","document","getElementById","appendChild","createElement","classList","add","tabIndex","setAttribute","modalDialog","modalContent","modalHeader","modalTitle","innerText","id","modalBody","navTabList","navFileBtn","appendNavButton","navUrlBtn","navTabContent","this","appendNavFileTab","appendNavUrlTab","modal","backdrop","keyboard","parent","active","controlTarget","navBtn","type","String","labelledBy","navFileTab","appendNavTab","wad0File","appendWadFileGroup","wad1File","btnStartFile","addEventListener","disabled","wad0FileUrl","URL","createObjectURL","files","wad1FileUrl","filename","wadFileGroup","wadFileLabel","innerHTML","wadFileInput","required","navUrlTab","urlHint","wad0Url","appendWadUrlGroup","wad1Url","btnStartUrl","value","navTab","example","wadUrlGroup","wadUrlLabel","wadUrlInput","show","hide"],"mappings":"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","file":"694.index.js","sourcesContent":["import { Modal } from 'bootstrap'\n\nexport class WadFileSelectionModal {\n\n    public onStart: (wad0Url, wad1Url) => any = null\n\n    private readonly modal: Modal\n\n    constructor(parentId: string) {\n        const rootElement = document.getElementById(parentId).appendChild(document.createElement('div'))\n        rootElement.classList.add('modal')\n        rootElement.tabIndex = -1\n        rootElement.setAttribute('role', 'dialog')\n        rootElement.setAttribute('aria-hidden', 'true')\n\n        const modalDialog = rootElement.appendChild(document.createElement('div'))\n        modalDialog.classList.add('modal-dialog')\n        rootElement.setAttribute('role', 'document')\n\n        const modalContent = modalDialog.appendChild(document.createElement('div'))\n        modalContent.classList.add('modal-content')\n\n        const modalHeader = modalContent.appendChild(document.createElement('div'))\n        modalHeader.classList.add('modal-header')\n        const modalTitle = modalHeader.appendChild(document.createElement('h5'))\n        modalTitle.classList.add('modal-title')\n        modalTitle.innerText = 'Load .wad files'\n        modalTitle.id = 'wadfileSelectModalLabel'\n        rootElement.setAttribute('aria-labelledby', modalTitle.id)\n\n        const modalBody = modalContent.appendChild(document.createElement('div'))\n        modalBody.classList.add('modal-body')\n\n        const hint = modalBody.appendChild(document.createElement('p'))\n        hint.innerText = 'Assets not included! In order to play the game, please select the game files.'\n\n        const navTabs = modalBody.appendChild(document.createElement('nav'))\n        const navTabList = navTabs.appendChild(document.createElement('div'))\n        navTabList.id = 'nav-tab'\n        navTabList.classList.add('nav', 'nav-tabs')\n        navTabList.setAttribute('role', 'tablist')\n\n        const navFileBtn = WadFileSelectionModal.appendNavButton(navTabList, true, 'nav-file-tab', 'nav-file', 'Local files (recommended)')\n        const navUrlBtn = WadFileSelectionModal.appendNavButton(navTabList, false, 'nav-url-tab', 'nav-url', 'Online from URL')\n\n        const navTabContent = modalBody.appendChild(document.createElement('div'))\n        navTabContent.classList.add('tab-content')\n        this.appendNavFileTab(navTabContent, navFileBtn.id)\n        this.appendNavUrlTab(navTabContent, navUrlBtn.id)\n\n        // rootElement has to be a valid bootstrap HTML modal before we can instantiate it\n        this.modal = new Modal(rootElement, {backdrop: 'static', keyboard: false})\n    }\n\n    private static appendNavButton(parent: HTMLDivElement, active: boolean, id: string, controlTarget: string, innerText: string) {\n        const navBtn = parent.appendChild(document.createElement('button'))\n        navBtn.classList.add('nav-link')\n        if (active) navBtn.classList.add('active')\n        navBtn.id = id\n        navBtn.setAttribute('data-bs-toggle', 'tab')\n        navBtn.setAttribute('data-bs-target', '#' + controlTarget)\n        navBtn.type = 'button'\n        navBtn.setAttribute('role', 'tab')\n        navBtn.setAttribute('aria-controls', controlTarget)\n        navBtn.setAttribute('aria-selected', String(active))\n        navBtn.innerText = innerText\n        return navBtn\n    }\n\n    private appendNavFileTab(parent: HTMLDivElement, labelledBy: string) {\n        const navFileTab = WadFileSelectionModal.appendNavTab(parent, true, 'nav-file', labelledBy)\n\n        const wad0File = WadFileSelectionModal.appendWadFileGroup(navFileTab, 'wad0-file', 'LegoRR0.wad')\n        const wad1File = WadFileSelectionModal.appendWadFileGroup(navFileTab, 'wad1-file', 'LegoRR1.wad')\n\n        const btnStartFile = navFileTab.appendChild(document.createElement('button'))\n        btnStartFile.type = 'submit'\n        btnStartFile.classList.add('btn', 'btn-primary', 'float-end')\n        btnStartFile.id = 'button-start-file'\n        btnStartFile.innerText = 'Start Game'\n        btnStartFile.addEventListener('click', () => {\n            btnStartFile.disabled = true\n            const wad0FileUrl = URL.createObjectURL(wad0File.files[0])\n            const wad1FileUrl = URL.createObjectURL(wad1File.files[0])\n            this.onStart(wad0FileUrl, wad1FileUrl)\n        })\n    }\n\n    private static appendWadFileGroup(parent: HTMLDivElement, id: string, filename: string) {\n        const wadFileGroup = parent.appendChild(document.createElement('div'))\n        wadFileGroup.classList.add('my-3')\n        const wadFileLabel = wadFileGroup.appendChild(document.createElement('label'))\n        wadFileLabel.setAttribute('for', id)\n        wadFileLabel.classList.add('form-label')\n        wadFileLabel.innerHTML = 'Select <span class=\"fw-bold\">' + filename + '</span> here:'\n        const wadFileInput = wadFileGroup.appendChild(document.createElement('input'))\n        wadFileInput.type = 'file'\n        wadFileInput.classList.add('form-control')\n        wadFileInput.id = id\n        wadFileInput.required = true\n        return wadFileInput\n    }\n\n    private appendNavUrlTab(parent: HTMLDivElement, labelledBy: string) {\n        const navUrlTab = WadFileSelectionModal.appendNavTab(parent, false, 'nav-url', labelledBy)\n\n        const urlHint = navUrlTab.appendChild(document.createElement('div'))\n        urlHint.classList.add('my-3')\n        urlHint.innerText = 'Direct links with correct Allow-Origin-CORS-Headers required here.'\n\n        const wad0Url = WadFileSelectionModal.appendWadUrlGroup(navUrlTab, 'wad0-url', 'LegoRR0.wad', 'https://drive.google.com/uc?export=download&id=11t9AJnGCWnEWlLxSsYQeB_Y4jrKfxVxQ')\n        const wad1Url = WadFileSelectionModal.appendWadUrlGroup(navUrlTab, 'wad1-url', 'LegoRR1.wad', 'https://drive.google.com/uc?export=download&id=11t9AJnGCWnEWlLxSsYQeB_Y4jrKfxVxQ')\n\n        const btnStartUrl = navUrlTab.appendChild(document.createElement('button'))\n        btnStartUrl.type = 'submit'\n        btnStartUrl.classList.add('btn', 'btn-primary', 'float-end')\n        btnStartUrl.id = 'button-start-url'\n        btnStartUrl.innerText = 'Start Game'\n        btnStartUrl.addEventListener('click', () => {\n            btnStartUrl.disabled = true\n            // XXX show loading progress for WAD files\n            this.onStart(wad0Url.value, wad1Url.value)\n        })\n    }\n\n    private static appendNavTab(parent: HTMLDivElement, active: boolean, id: string, labelledBy: string) {\n        const navTab = parent.appendChild(document.createElement('div'))\n        navTab.classList.add('tab-pane', 'fade')\n        if (active) navTab.classList.add('show', 'active')\n        navTab.id = id\n        navTab.setAttribute('role', 'tabpanel')\n        navTab.setAttribute('aria-labelledby', labelledBy)\n        return navTab\n    }\n\n    private static appendWadUrlGroup(parent: HTMLDivElement, id: string, filename: string, example: string) {\n        const wadUrlGroup = parent.appendChild(document.createElement('div'))\n        wadUrlGroup.classList.add('my-3')\n        const wadUrlLabel = wadUrlGroup.appendChild(document.createElement('label'))\n        wadUrlLabel.setAttribute('for', id)\n        wadUrlLabel.classList.add('form-label')\n        wadUrlLabel.innerHTML = 'Enter url for <span class=\"fw-bold\">' + filename + '</span> here:'\n        const wadUrlInput = wadUrlGroup.appendChild(document.createElement('input'))\n        wadUrlInput.type = 'url'\n        wadUrlInput.classList.add('form-control')\n        wadUrlInput.id = id\n        wadUrlInput.required = true\n        wadUrlInput.value = example\n        return wadUrlInput\n    }\n\n    public show() {\n        this.modal.show()\n    }\n\n    public hide() {\n        this.modal.hide()\n    }\n\n}\n"],"sourceRoot":""}